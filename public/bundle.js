/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
var __webpack_exports__ = {};
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/

//Selector
const inputtingTodos = document.querySelector('.task-input input');
const vChecking = document.querySelector('.task-input i');
const listTodo = document.querySelector('.task-box');
const dockingControl = document.querySelector('.controls');
const quantity = document.querySelector('.count');
const clearingAll = document.querySelector('.clear-btn');
//window running
window.updatingCheck = updatingCheck;
window.deletingTodo = deletingTodo;
window.editTodo = editTodo;
window.editContent = editContent;
//Variables
let todos;
let idFilter = 'all';
let count;
todos = JSON.parse(localStorage.getItem('todo-list') || '[]');
// Listener Event
inputtingTodos === null || inputtingTodos === void 0 ? void 0 : inputtingTodos.addEventListener('keyup', saveTodos);
vChecking === null || vChecking === void 0 ? void 0 : vChecking.addEventListener('click', checkingAll);
clearingAll.addEventListener('click', clearingAllCompleted);
//Function
function showTodos(idFilter) {
    let li = '';
    let todoPending;
    let todoCompleted;
    count = todos.length;
    if (todos) {
        todos.forEach((item, index) => {
            if (item.status === 'completed') {
                count -= 1;
            }
            let itemCompleted = item.status === 'completed' ? 'checked' : '';
            if (idFilter === item.status || idFilter === 'all') {
                li += `<li class="task">
                <label>
                  <input onclick="updatingCheck(this)" type="checkbox" id="${index}" ${itemCompleted}>
                  <span ondblclick="editTodo(this)" class="${index} ${itemCompleted}">${item.content}</span>
                </label>
                <div class="task-close">
                  <i onclick="deletingTodo(${index})" class="fas fa-trash-alt"></i>
                </div>
              </li>`;
            }
            if (item.status === 'completed') {
                clearingAll.style.opacity = '1';
            }
        });
    }
    //fix bug hide-show btn clear all
    todoPending = todos.filter(todoPending => todoPending.status === 'pending');
    if (todoPending.length === 0 || todoPending.length === todos.length) {
        clearingAll.style.opacity = '0';
        vChecking.style.opacity = '0.1';
        vChecking.classList.remove('check-all');
    }
    todoCompleted = todos.filter(todoCompleted => todoCompleted.status === 'completed');
    if (todoCompleted.length === todos.length) {
        clearingAll.style.opacity = '1';
        vChecking.style.opacity = '1';
        vChecking.classList.add('check-all');
    }
    else {
        vChecking.classList.remove('check-all');
    }
    listTodo.innerHTML = li;
    if (todos.length !== 0) {
        vChecking.style.display = 'inline';
        dockingControl.style.display = 'flex';
        quantity.innerText = `${count}`;
    }
    else {
        dockingControl.style.display = 'none';
        vChecking.style.display = 'none';
        quantity.innerText = `${count}`;
    }
}
showTodos(idFilter);
function saveTodos(e) {
    let contentTodo = inputtingTodos === null || inputtingTodos === void 0 ? void 0 : inputtingTodos.value.trim();
    if (e.key === 'Enter' && contentTodo) {
        if (!todos) {
            todos = [];
        }
        let todoInfo = {
            content: contentTodo,
            status: 'pending',
        };
        todos.push(todoInfo);
        inputtingTodos.value = '';
        localStorage.setItem('todo-list', JSON.stringify(todos));
        showTodos(idFilter);
    }
}
function updatingCheck(e) {
    var _a;
    count = todos.length;
    let taskContent = (_a = e === null || e === void 0 ? void 0 : e.parentElement) === null || _a === void 0 ? void 0 : _a.lastElementChild;
    let todoCompleted;
    let todoPending;
    if (e.checked) {
        taskContent.classList.add('checked');
        // taskContent.style.textDecoration = 'line-through'
        taskContent.style.opacity = '0.5';
        clearingAll.style.opacity = '1';
        todos[e.id].status = 'completed';
    }
    else {
        taskContent.classList.remove('checked');
        // taskContent.style.textDecoration = 'none'
        taskContent.style.opacity = '1';
        clearingAll.style.opacity = '0';
        todos[e.id].status = 'pending';
    }
    todoCompleted = todos.filter(todoCompleted => todoCompleted.status === 'completed');
    if (todoCompleted.length === todos.length) {
        vChecking.classList.add('check-all');
        vChecking.style.opacity = '1';
    }
    else {
        vChecking.classList.remove('check-all');
        vChecking.style.opacity = '0.1';
    }
    todoPending = todos.filter(todoPending => todoPending.status === 'pending');
    if (todoPending.length === todos.length) {
        clearingAll.style.opacity = '0';
    }
    quantity.innerText = `${count - todoCompleted.length}`;
    localStorage.setItem('todo-list', JSON.stringify(todos));
}
function checkingAll() {
    if (vChecking.classList.contains('check-all') === false) {
        vChecking.classList.add('check-all');
        clearingAll.style.opacity = '1';
        todos.forEach((item) => {
            item.status = 'completed';
        });
    }
    else {
        vChecking.classList.remove('check-all');
        clearingAll.style.opacity = '0.1';
        todos.forEach((item) => {
            item.status = 'pending';
        });
    }
    localStorage.setItem('todo-list', JSON.stringify(todos));
    showTodos(idFilter);
}
function deletingTodo(idDelete) {
    todos.splice(idDelete, 1);
    localStorage.setItem('todo-list', JSON.stringify(todos));
    if (todos.length === 0) {
        dockingControl.style.display = 'none';
        clearingAll.style.display = 'none';
    }
    showTodos(idFilter);
}
function clearingAllCompleted() {
    let allTodoPending;
    allTodoPending = todos.filter(allTodoPending => allTodoPending.status !== 'completed');
    todos = allTodoPending;
    console.log(todos);
    if (todos.length === 0) {
        vChecking.style.display = 'none';
        dockingControl.style.display = 'none';
    }
    vChecking.classList.remove('check-all');
    clearingAll.style.opacity = '0';
    localStorage.setItem('todo-list', JSON.stringify(todos));
    showTodos(idFilter);
}
function editTodo(content) {
    const deletingSelector = content.parentElement.parentElement.lastElementChild;
    const boxInput = content.parentElement.firstElementChild;
    deletingSelector.style.opacity = '0';
    boxInput.style.opacity = '0';
    let valueEdit = content.innerText;
    content.innerText = '';
    content.innerHTML += `<input onclick="editContent(this)" class="edit" type="text" value="${valueEdit}"></input>`;
}
function editContent(input) {
    const spanTag = input.parentElement;
    const deletingSelector = spanTag.parentElement.parentElement.lastElementChild;
    let boxInput = spanTag.parentElement.firstElementChild;
    input.addEventListener('keyup', (e) => {
        if (e.keyCode === 13) {
            e.preventDefault();
            spanTag.innerText = input.value.trim();
            input.style.display = 'none';
            deletingSelector.style.opacity = '1';
            boxInput.style.opacity = '1';
            todos[spanTag.class[0]].content = spanTag.innerText;
            localStorage.setItem('todo-list', JSON.stringify(todos));
        }
    });
    input.addEventListener('blur', (e) => {
        e.preventDefault();
        spanTag.innerText = input.value.trim();
        input.style.display = 'none';
        deletingSelector.style.opacity = '1';
        boxInput.style.opacity = '1';
        todos[spanTag.classList[0]].content = spanTag.innerText;
        localStorage.setItem('todo-list', JSON.stringify(todos));
    });
}

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNO1lBQzVCLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsR0FBRztZQUNwQyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxHQUFHO1lBQzVCLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxTQUFTO1lBQ25ELFlBQVksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDekQ7SUFDSCxDQUFDLENBQUM7SUFFRixLQUFLLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBTSxFQUFFLEVBQUU7UUFDeEMsQ0FBQyxDQUFDLGNBQWMsRUFBRTtRQUNsQixPQUFPLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFO1FBQ3RDLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE1BQU07UUFDNUIsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxHQUFHO1FBQ3BDLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLEdBQUc7UUFDNUIsS0FBSyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLFNBQVM7UUFDdkQsWUFBWSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMxRCxDQUFDLENBQUM7QUFDSixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbDAzLXRzb2Z0b2RvLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vU2VsZWN0b3JcbmNvbnN0IGlucHV0dGluZ1RvZG9zID0oPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2staW5wdXQgaW5wdXQnKSlcbmNvbnN0IHZDaGVja2luZyA9ICg8SFRNTElGcmFtZUVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2staW5wdXQgaScpKVxuY29uc3QgbGlzdFRvZG8gPSAoPEhUTUxFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWJveCcpKVxuY29uc3QgZG9ja2luZ0NvbnRyb2wgPSAoPEhUTUxFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9scycpKVxuY29uc3QgcXVhbnRpdHkgPSAoPEhUTUxFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb3VudCcpKVxuY29uc3QgY2xlYXJpbmdBbGwgPSg8SFRNTEJ1dHRvbkVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsZWFyLWJ0bicpKVxuXG5pbnRlcmZhY2UgdG9kb3tcbiAgY29udGVudD86IHN0cmluZ1xuICBzdGF0dXM/OiBzdHJpbmdcbn1cbi8vd2luZG93IHJ1bm5pbmdcbndpbmRvdy51cGRhdGluZ0NoZWNrID0gdXBkYXRpbmdDaGVja1xud2luZG93LmRlbGV0aW5nVG9kbyA9IGRlbGV0aW5nVG9kb1xud2luZG93LmVkaXRUb2RvID0gZWRpdFRvZG9cbndpbmRvdy5lZGl0Q29udGVudCA9IGVkaXRDb250ZW50XG5cbi8vVmFyaWFibGVzXG5sZXQgdG9kb3M6IHRvZG9bXVxubGV0IGlkRmlsdGVyOiBzdHJpbmcgPSAnYWxsJ1xubGV0IGNvdW50OiBudW1iZXJcbnRvZG9zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9kby1saXN0JykgfHwgJ1tdJylcblxuLy8gTGlzdGVuZXIgRXZlbnRcbmlucHV0dGluZ1RvZG9zPy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHNhdmVUb2RvcylcbnZDaGVja2luZz8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja2luZ0FsbClcbmNsZWFyaW5nQWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xlYXJpbmdBbGxDb21wbGV0ZWQpXG5cbi8vRnVuY3Rpb25cbmZ1bmN0aW9uIHNob3dUb2RvcyhpZEZpbHRlcjogc3RyaW5nKSB7XG4gIGxldCBsaTogc3RyaW5nID0gJydcbiAgbGV0IHRvZG9QZW5kaW5nOiB0b2RvW11cbiAgbGV0IHRvZG9Db21wbGV0ZWQ6IHRvZG9bXVxuICBjb3VudCA9IHRvZG9zLmxlbmd0aFxuXG4gIGlmICh0b2Rvcykge1xuICAgIHRvZG9zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICBpZiAoaXRlbS5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICAgIGNvdW50LT0gMVxuICAgICAgfVxuICAgICAgbGV0IGl0ZW1Db21wbGV0ZWQgPSBpdGVtLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgPyAnY2hlY2tlZCcgOiAnJ1xuXG4gICAgICBpZiAoaWRGaWx0ZXIgPT09IGl0ZW0uc3RhdHVzIHx8IGlkRmlsdGVyID09PSAnYWxsJykge1xuICAgICAgICBsaSArPSBgPGxpIGNsYXNzPVwidGFza1wiPlxuICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dCBvbmNsaWNrPVwidXBkYXRpbmdDaGVjayh0aGlzKVwiIHR5cGU9XCJjaGVja2JveFwiIGlkPVwiJHtpbmRleH1cIiAke2l0ZW1Db21wbGV0ZWR9PlxuICAgICAgICAgICAgICAgICAgPHNwYW4gb25kYmxjbGljaz1cImVkaXRUb2RvKHRoaXMpXCIgY2xhc3M9XCIke2luZGV4fSAke2l0ZW1Db21wbGV0ZWR9XCI+JHtpdGVtLmNvbnRlbnR9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2stY2xvc2VcIj5cbiAgICAgICAgICAgICAgICAgIDxpIG9uY2xpY2s9XCJkZWxldGluZ1RvZG8oJHtpbmRleH0pXCIgY2xhc3M9XCJmYXMgZmEtdHJhc2gtYWx0XCI+PC9pPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2xpPmA7XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgY2xlYXJpbmdBbGwuc3R5bGUub3BhY2l0eSA9ICcxJ1xuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvL2ZpeCBidWcgaGlkZS1zaG93IGJ0biBjbGVhciBhbGxcbiAgdG9kb1BlbmRpbmcgPSB0b2Rvcy5maWx0ZXIodG9kb1BlbmRpbmcgPT4gdG9kb1BlbmRpbmcuc3RhdHVzID09PSAncGVuZGluZycpO1xuICBpZiAodG9kb1BlbmRpbmcubGVuZ3RoID09PSAwIHx8IHRvZG9QZW5kaW5nLmxlbmd0aCA9PT0gdG9kb3MubGVuZ3RoKXtcbiAgICBjbGVhcmluZ0FsbC5zdHlsZS5vcGFjaXR5ID0gJzAnXG4gICAgdkNoZWNraW5nLnN0eWxlLm9wYWNpdHkgPSAnMC4xJ1xuICAgIHZDaGVja2luZy5jbGFzc0xpc3QucmVtb3ZlKCdjaGVjay1hbGwnKVxuICB9XG5cbiAgdG9kb0NvbXBsZXRlZCA9IHRvZG9zLmZpbHRlcih0b2RvQ29tcGxldGVkID0+IHRvZG9Db21wbGV0ZWQuc3RhdHVzID09PSAnY29tcGxldGVkJyk7XG4gIGlmICh0b2RvQ29tcGxldGVkLmxlbmd0aCA9PT0gdG9kb3MubGVuZ3RoKXtcbiAgICBjbGVhcmluZ0FsbC5zdHlsZS5vcGFjaXR5ID0gJzEnXG4gICAgdkNoZWNraW5nLnN0eWxlLm9wYWNpdHkgPSAnMSdcbiAgICB2Q2hlY2tpbmcuY2xhc3NMaXN0LmFkZCgnY2hlY2stYWxsJylcbiAgfSBlbHNlIHtcbiAgICB2Q2hlY2tpbmcuY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2stYWxsJylcbiAgfVxuXG4gIGxpc3RUb2RvLmlubmVySFRNTCA9IGxpXG4gIGlmICh0b2Rvcy5sZW5ndGggIT09IDApIHtcbiAgICB2Q2hlY2tpbmcuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnXG4gICAgZG9ja2luZ0NvbnRyb2wuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xuICAgIHF1YW50aXR5LmlubmVyVGV4dCA9IGAke2NvdW50fWBcbiAgfSBlbHNlIHtcbiAgICBkb2NraW5nQ29udHJvbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgdkNoZWNraW5nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBxdWFudGl0eS5pbm5lclRleHQgPSBgJHtjb3VudH1gXG4gIH1cbn1cbnNob3dUb2RvcyhpZEZpbHRlcilcblxuZnVuY3Rpb24gc2F2ZVRvZG9zKGU6IGFueSkge1xuICBsZXQgY29udGVudFRvZG8gPSBpbnB1dHRpbmdUb2Rvcz8udmFsdWUudHJpbSgpXG4gIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiBjb250ZW50VG9kbykge1xuICAgIGlmKCF0b2Rvcyl7XG4gICAgICB0b2RvcyA9IFtdXG4gICAgfVxuXG4gICAgbGV0IHRvZG9JbmZvID0ge1xuICAgICAgY29udGVudDogY29udGVudFRvZG8sXG4gICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICB9XG5cbiAgICB0b2Rvcy5wdXNoKHRvZG9JbmZvKVxuICAgIGlucHV0dGluZ1RvZG9zLnZhbHVlID0gJydcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kby1saXN0JywgSlNPTi5zdHJpbmdpZnkodG9kb3MpKVxuICAgIHNob3dUb2RvcyhpZEZpbHRlcilcbiAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGluZ0NoZWNrKGU6IGFueSkge1xuICBjb3VudCA9IHRvZG9zLmxlbmd0aFxuICBsZXQgdGFza0NvbnRlbnQgPSBlPy5wYXJlbnRFbGVtZW50Py5sYXN0RWxlbWVudENoaWxkXG4gIGxldCB0b2RvQ29tcGxldGVkOiB0b2RvW11cbiAgbGV0IHRvZG9QZW5kaW5nOiB0b2RvW11cblxuICBpZiAoZS5jaGVja2VkKSB7XG4gICAgdGFza0NvbnRlbnQuY2xhc3NMaXN0LmFkZCgnY2hlY2tlZCcpXG4gICAgLy8gdGFza0NvbnRlbnQuc3R5bGUudGV4dERlY29yYXRpb24gPSAnbGluZS10aHJvdWdoJ1xuICAgIHRhc2tDb250ZW50LnN0eWxlLm9wYWNpdHkgPSAnMC41J1xuICAgIGNsZWFyaW5nQWxsLnN0eWxlLm9wYWNpdHkgPSAnMSdcbiAgICB0b2Rvc1tlLmlkXS5zdGF0dXMgPSAnY29tcGxldGVkJ1xuICB9IGVsc2Uge1xuICAgIHRhc2tDb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrZWQnKVxuICAgIC8vIHRhc2tDb250ZW50LnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ25vbmUnXG4gICAgdGFza0NvbnRlbnQuc3R5bGUub3BhY2l0eSA9ICcxJ1xuICAgIGNsZWFyaW5nQWxsLnN0eWxlLm9wYWNpdHkgPSAnMCdcbiAgICB0b2Rvc1tlLmlkXS5zdGF0dXMgPSAncGVuZGluZydcbiAgfVxuXG4gIHRvZG9Db21wbGV0ZWQgPSB0b2Rvcy5maWx0ZXIodG9kb0NvbXBsZXRlZCA9PiB0b2RvQ29tcGxldGVkLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpXG4gIGlmICh0b2RvQ29tcGxldGVkLmxlbmd0aCA9PT0gdG9kb3MubGVuZ3RoKSB7XG4gICAgdkNoZWNraW5nLmNsYXNzTGlzdC5hZGQoJ2NoZWNrLWFsbCcpXG4gICAgdkNoZWNraW5nLnN0eWxlLm9wYWNpdHkgPSAnMSdcbiAgfSBlbHNlIHtcbiAgICB2Q2hlY2tpbmcuY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2stYWxsJylcbiAgICB2Q2hlY2tpbmcuc3R5bGUub3BhY2l0eSA9ICcwLjEnXG4gIH1cblxuICB0b2RvUGVuZGluZyA9IHRvZG9zLmZpbHRlcih0b2RvUGVuZGluZyA9PiB0b2RvUGVuZGluZy5zdGF0dXMgPT09ICdwZW5kaW5nJylcbiAgaWYgKHRvZG9QZW5kaW5nLmxlbmd0aCA9PT0gdG9kb3MubGVuZ3RoKSB7XG4gICAgY2xlYXJpbmdBbGwuc3R5bGUub3BhY2l0eSA9ICcwJ1xuICB9XG5cbiAgcXVhbnRpdHkuaW5uZXJUZXh0ID0gYCR7Y291bnQtdG9kb0NvbXBsZXRlZC5sZW5ndGh9YFxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kby1saXN0JywgSlNPTi5zdHJpbmdpZnkodG9kb3MpKVxufVxuXG5mdW5jdGlvbiBjaGVja2luZ0FsbCgpIHtcbiAgaWYgKHZDaGVja2luZy5jbGFzc0xpc3QuY29udGFpbnMoJ2NoZWNrLWFsbCcpID09PSBmYWxzZSkge1xuICAgIHZDaGVja2luZy5jbGFzc0xpc3QuYWRkKCdjaGVjay1hbGwnKVxuICAgIGNsZWFyaW5nQWxsLnN0eWxlLm9wYWNpdHkgPSAnMSdcbiAgICB0b2Rvcy5mb3JFYWNoKCAoaXRlbSkgPT4ge1xuICAgICAgaXRlbS5zdGF0dXMgPSAnY29tcGxldGVkJ1xuICAgIH0pXG4gIH0gZWxzZSB7XG4gICAgdkNoZWNraW5nLmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrLWFsbCcpXG4gICAgY2xlYXJpbmdBbGwuc3R5bGUub3BhY2l0eSA9ICcwLjEnXG4gICAgdG9kb3MuZm9yRWFjaCggKGl0ZW0pID0+IHtcbiAgICAgIGl0ZW0uc3RhdHVzID0gJ3BlbmRpbmcnXG4gICAgfSlcbiAgfVxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kby1saXN0JywgSlNPTi5zdHJpbmdpZnkodG9kb3MpKVxuICBzaG93VG9kb3MoaWRGaWx0ZXIpXG59XG5cbmZ1bmN0aW9uIGRlbGV0aW5nVG9kbyhpZERlbGV0ZTogYW55KSB7XG4gIHRvZG9zLnNwbGljZShpZERlbGV0ZSwgMSlcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RvZG8tbGlzdCcsIEpTT04uc3RyaW5naWZ5KHRvZG9zKSlcbiAgaWYgKHRvZG9zLmxlbmd0aCA9PT0gMCkge1xuICAgIGRvY2tpbmdDb250cm9sLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBjbGVhcmluZ0FsbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gIH1cbiAgc2hvd1RvZG9zKGlkRmlsdGVyKVxufVxuXG5mdW5jdGlvbiBjbGVhcmluZ0FsbENvbXBsZXRlZCgpIHtcbiAgbGV0IGFsbFRvZG9QZW5kaW5nOiB0b2RvW11cbiAgYWxsVG9kb1BlbmRpbmc9IHRvZG9zLmZpbHRlcihhbGxUb2RvUGVuZGluZyA9PiBhbGxUb2RvUGVuZGluZy5zdGF0dXMgIT09ICdjb21wbGV0ZWQnKVxuICB0b2RvcyA9IGFsbFRvZG9QZW5kaW5nO1xuICBjb25zb2xlLmxvZyh0b2Rvcyk7XG5cbiAgaWYgKHRvZG9zLmxlbmd0aCA9PT0gMCkge1xuICAgIHZDaGVja2luZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgZG9ja2luZ0NvbnRyb2wuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICB9XG4gIHZDaGVja2luZy5jbGFzc0xpc3QucmVtb3ZlKCdjaGVjay1hbGwnKVxuICBjbGVhcmluZ0FsbC5zdHlsZS5vcGFjaXR5ID0gJzAnXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvLWxpc3QnLCBKU09OLnN0cmluZ2lmeSh0b2RvcykpXG4gIHNob3dUb2RvcyhpZEZpbHRlcilcbn1cblxuZnVuY3Rpb24gZWRpdFRvZG8oY29udGVudDogYW55KSB7XG4gIGNvbnN0IGRlbGV0aW5nU2VsZWN0b3IgPSg8SFRNTEVsZW1lbnQ+Y29udGVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQubGFzdEVsZW1lbnRDaGlsZClcbiAgY29uc3QgYm94SW5wdXQgPSg8SFRNTElucHV0RWxlbWVudD5jb250ZW50LnBhcmVudEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpXG4gIGRlbGV0aW5nU2VsZWN0b3Iuc3R5bGUub3BhY2l0eSA9ICcwJ1xuICBib3hJbnB1dC5zdHlsZS5vcGFjaXR5ID0gJzAnXG4gIGxldCB2YWx1ZUVkaXQ6IHN0cmluZyA9IGNvbnRlbnQuaW5uZXJUZXh0XG4gIGNvbnRlbnQuaW5uZXJUZXh0ID0gJydcbiAgY29udGVudC5pbm5lckhUTUwgKz0gYDxpbnB1dCBvbmNsaWNrPVwiZWRpdENvbnRlbnQodGhpcylcIiBjbGFzcz1cImVkaXRcIiB0eXBlPVwidGV4dFwiIHZhbHVlPVwiJHt2YWx1ZUVkaXR9XCI+PC9pbnB1dD5gO1xufVxuXG5mdW5jdGlvbiBlZGl0Q29udGVudChpbnB1dDogYW55KSB7XG4gIGNvbnN0IHNwYW5UYWc6IGFueSA9IGlucHV0LnBhcmVudEVsZW1lbnRcbiAgY29uc3QgZGVsZXRpbmdTZWxlY3RvciA9KDxIVE1MRWxlbWVudD5zcGFuVGFnLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5sYXN0RWxlbWVudENoaWxkKVxuICBsZXQgYm94SW5wdXQgPSBzcGFuVGFnLnBhcmVudEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGU6IGFueSkgPT4ge1xuICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIHNwYW5UYWcuaW5uZXJUZXh0ID0gaW5wdXQudmFsdWUudHJpbSgpXG4gICAgICBpbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICBkZWxldGluZ1NlbGVjdG9yLnN0eWxlLm9wYWNpdHkgPSAnMSdcbiAgICAgIGJveElucHV0LnN0eWxlLm9wYWNpdHkgPSAnMSdcbiAgICAgIHRvZG9zW3NwYW5UYWcuY2xhc3NbMF1dLmNvbnRlbnQgPSBzcGFuVGFnLmlubmVyVGV4dFxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RvZG8tbGlzdCcsIEpTT04uc3RyaW5naWZ5KHRvZG9zKSlcbiAgICB9XG4gIH0pXG5cbiAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIChlOiBhbnkpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBzcGFuVGFnLmlubmVyVGV4dCA9IGlucHV0LnZhbHVlLnRyaW0oKVxuICAgIGlucHV0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBkZWxldGluZ1NlbGVjdG9yLnN0eWxlLm9wYWNpdHkgPSAnMSdcbiAgICBib3hJbnB1dC5zdHlsZS5vcGFjaXR5ID0gJzEnXG4gICAgdG9kb3Nbc3BhblRhZy5jbGFzc0xpc3RbMF1dLmNvbnRlbnQgPSBzcGFuVGFnLmlubmVyVGV4dFxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvLWxpc3QnLCBKU09OLnN0cmluZ2lmeSh0b2RvcykpXG4gIH0pXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=